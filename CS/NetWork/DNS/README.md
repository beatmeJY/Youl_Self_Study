# 📡DNS 란? (Domain Name System)
* 사람이 쉽게 이해할 수 있는 도메인 명을 IP 주소로 변환하여 준다.  
* IP 주소가 바뀌어도 도메인 주소는 변경하지 않아도 된다.  
* DNS는 UDP 통신을 한다.  
* TCP의 연결 비용을 줄임으로써 아주 많고 간단한 통신만을 하는 DNS 상 UDP가 효과적이다.  
  
## 재귀적 질의 란? (Recursive Query)
   + Local DNS 서버가 여러 DNS 서버와 통신하여 IP 주소를 찾아내고 클라이언트에 반환하는 것이다.  
  
## 반복적 질의 란? (Iterative Query)
   + Local DNS 서버가 반복하여 루트 네임서버, TLD 서버 등 최종 IP 주소를 받을때까지 찾는 것이다.  

## 루트 네임 서버란?  
* DNS 조회 과정의 시작점이다. (DNS 계층 구조 상 가장 꼭대기에 위치)  
* 특정 도메인에 대한 정보를 직접 정의하진 않는다.  
* 대신 요청 받은 도메인 이름을 처리할 수 있는 하위 네임서버 정보를 전달해준다.  
* 현재 글 작성 기준 전 세계의 13개 뿐만 존재한다.  
  
## TLD 네임 서버란?  
* 최상위 도메인에 대한 정보를 저장하고 관리한다. (.com, .org, .net 등)  
* 루트 네임 서버로 부터 받은 서버가 TLD 네임 서버이다.
  
## 신뢰할 수 있는 DNS 란?  
  + 실제로 DNS 리소스 레코드를 보유하고 있는 서버를 말한다.  
  + 이 서버는 DNS 조회 체인의 마지막에 있는 서버로 최종적으로 웹 브라우저가 웹사이트에 액세스하는데 필요한 IP 주소에 도달하도록 요청할 수 있게 한다.  
  
  
## 🍒사용자의 웹 사이트 DNS 라우팅 순서
(아래의 다이어그램은 재귀적 DNS 서비스와 신뢰할 수 있는 DNS 서비스가 서로 연계하여 최종 사용자를 웹 사이트 또는 애플리케이션으로 라우팅하는 그림이다.)  
![img.png](img.png)  
출처 : https://aws.amazon.com/ko/route53/what-is-dns/?nc1=h_ls  
  
### 1. 사용자가 주소창에 도메인 주소를 입력한다.
* 클라이언트가 로컬 DNS 캐시를 조회합니다, (없다면 아래 프로세스를 계속 진행합니다.)
* 호스트 파일 검사를 합니다. (없다면 아래 프로세스를 계속 진행합니다.)  
  
### 2. 인터넷 공급업체 ISP(Internet Service Provider) 가 관리하는 DNS 리졸버에 라우팅한다.  
   + 우리나라 ISP 에는 KT, LG, SKT 등이 있다.
   + 라우팅이란? (네트워크에서 통신 데이터를 보낼때 최적의 경로를 선택하는 과정을 말한다.)
  
### 3. DNS 리졸버가 주소를 읽고 DNS ROOT NAME 서버에 보낸다.
   + 루트 네임서버는 요청온 도메인의 권한이 있는 루트 아래 최상위 도메인 위치를 알고 있음
   + 해당 일반 최상위 도메인(일명 gTLD 여기선 .com 이므로)을 반환시켜줌.
  
### 4. DNS 리졸버는 해당 gTLD 서버에 다시 쿼리를 전달한다.
   + 일반 최상위 도메인 서버(gTLD)는 Amazon Route 53 네임 서버를 찾아 응답.    
  
### 5. DNS 리졸버는 Amazon Route 53 네임 서버를 하나 선택하여 해당 서버에 쿼리를 전달한다.
+ 이곳은 DNS 서버 중 마지막 단계인 신뢰할 수 있는 DNS 서버임.  

### 6. Amazon Route 53 네임서버는 해당 도메인 정보로 레코드를 찾아 연관된 IP 주소를 받고 DNS 리졸버에게 전달하여 준다.
  
### 7. DNS 리졸버가 얻어낸 IP 주소를 사용자에게 전달한다.
   + 이 때 DNS 리졸버는 사용자 PC/공유기 등에 세팅 된 통신사/기관의 캐시 DNS 서버로 사용자가 지정하는 일정 기간 해당 정보를 저장 함.  
  
### 8. 사용자의 웹 브라우저는 받은 IP 주소로 도메인에 대한 요청을 전송한다.  
  
### 9. 해당 IP 주소에 있는 WEB/WAS는 웹 페이지를 사용자 웹 브라우저에 반환하여 브라우저에서 페이지를 표시 된다.